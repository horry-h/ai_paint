<!-- é€‰æ¡†é¡µé¢ -->
<view class="page">
  <!-- å›¾ç‰‡é¢„è§ˆ -->
  <view class="preview-section">
    <view class="preview-card">
      <image wx:if="{{selectedImage}}" class="preview-image" src="{{selectedImage}}" mode="aspectFit"></image>
      <view wx:elif="{{aiGeneratedColor}}" class="preview-ai" style="background: {{aiGeneratedColor}}">
        <text class="ai-text">AIç”Ÿæˆå›¾ç‰‡</text>
      </view>
      <view wx:else class="preview-placeholder">
        <text class="placeholder-icon">ğŸ“·</text>
        <text class="placeholder-text">é€‰æ‹©å›¾ç‰‡é¢„è§ˆ</text>
      </view>
      <view class="preview-overlay">
        <text class="preview-text">é¢„è§ˆæ•ˆæœ</text>
      </view>
    </view>
  </view>

  <!-- ç›¸æ¡†æ ·å¼é€‰æ‹© -->
  <view class="style-section">
    <text class="section-title">ç›¸æ¡†æ ·å¼</text>
    <scroll-view class="style-scroll" scroll-x>
              <view class="style-list">
          <view 
            class="style-item {{selectedStyle === item.id ? 'active' : ''}}"
            wx:for="{{styles}}" 
            wx:key="id"
            data-id="{{item.id}}"
            bindtap="selectStyle"
          >
            <view class="style-preview" style="background: {{item.color}}">
              <text class="style-text">{{item.name}}</text>
            </view>
            <text class="style-name">{{item.name}}</text>
            <text class="style-price">Â¥{{item.price}}</text>
          </view>
        </view>
    </scroll-view>
  </view>

  <!-- å°ºå¯¸é€‰æ‹© -->
  <view class="size-section">
    <text class="section-title">å°ºå¯¸é€‰æ‹©</text>
    <view class="size-grid">
      <view 
        class="size-item {{selectedSize === item.id ? 'active' : ''}}"
        wx:for="{{sizes}}" 
        wx:key="id"
        data-id="{{item.id}}"
        bindtap="selectSize"
      >
        <text class="size-name">{{item.name}}</text>
        <text class="size-desc">{{item.desc}}</text>
        <text class="size-price">Â¥{{item.price}}</text>
      </view>
    </view>
  </view>

  <!-- å¡çº¸é¢œè‰² -->
  <view class="mat-section">
    <text class="section-title">å¡çº¸é¢œè‰²</text>
    <view class="mat-grid">
      <view 
        class="mat-item {{selectedMat === item.id ? 'active' : ''}}"
        wx:for="{{mats}}" 
        wx:key="id"
        data-id="{{item.id}}"
        bindtap="selectMat"
      >
        <view class="mat-color" style="background: {{item.color}}"></view>
        <text class="mat-name">{{item.name}}</text>
      </view>
    </view>
  </view>

  <!-- ä»·æ ¼å’Œæ“ä½œ -->
  <view class="action-section">
    <view class="price-info">
      <text class="price-label">é¢„è®¡ä»·æ ¼</text>
      <text class="price-value">Â¥{{totalPrice}}</text>
    </view>
    <button class="preview-btn" bindtap="goPreview">3D é¢„è§ˆ</button>
  </view>
</view>
